之前在面蚂蚁金服的时候被面试官问了一个问题：   

**“如果同时更新页面中的1000个列表项，会有什么问题，怎样解决呢？”**   

来和大家分享一下我的一些思考，抛砖引玉~

### 点在哪里？   

对于类似于这种的问题，首先你要考虑的是面试官提问的“点”在哪里   

很可能你白话了一大堆也没说到面试官想要考察的东西，这就对你很不利了...   

最完美的状态是，一开口就说道出他想要的答案，并且在举一反三的过程中能提出他没有想到的东西，基本上就稳了  

### 定点打击！ 

回到这道题，其实面试官想要通过这道题目考察一下我对浏览器内存运行机制的了解   

**同时更新1000项列表的话，由于js引擎的单线程机制，页面会一直卡在那里不动，最重要的是还会爆内存**   

而对于此类问题有一个普遍的答案，就是使用```setTimeout(fn, 0)```进行分时   

将更新工作拆开来，比如说每次更新50项，然后通过```setTimeout```将资源让出，由于```setTimeout```会在计时结束以后将下一个更新工作插入macroTask，当前tick所占的资源会随着垃圾回收被释放，页面也不会卡在那里了   

其实，**给出以上的答案基本上已经算是合格了**。以至于更出彩的答案，在道出以上内容后我又有向他补充：   

如果有同时更新1000项列表的case，说明这个场景下数据的处理已经算是复杂的了。那么，是否要考虑建立前端数据层？   

对于分时也只是一个普适的操作。我觉得还是要贴合具体的应用场景来采取针对性的解决方案   

比如说，我们是否可以监听用户的浏览行为，对于即将浏览到的列表才给予更新操作。因为我觉得在这种场景下用户没有浏览到的更新操作可以被认为是冗余的   

若是采取这种方案的话，以上的case也会得到解决，而分时处理就可以作为一种保险机制了   

---
其实在面试的时候，面试官们都会青睐有自己想法的人   

总是和面试官来聊那些基础的话题，人人都是这样，最后的结果可能真的就是看眼缘了   

如果运气不错，面试官问的东西正是你鼓捣过的，那么把节奏带下去，能说到面试官都没有关注过的地方，这就是你脱颖而出的机会啦~